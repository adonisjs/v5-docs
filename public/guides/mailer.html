<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Routing</title>
  <meta name="description" content="A typical route accepts the route pattern as the first argument and route handler as the second argument. For example:">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/site.webmanifest">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/icons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <meta name="turbo-cache-control" content="no-cache">

  <link
    rel="preload"
    href="/assets/fonts/UntitledSans-RegularItalic.2c343d99.woff2"
    as="font"
    type="font/woff2" crossorigin
  >
  <link
    rel="preload"
    href="/assets/fonts/UntitledSans-Regular.f7547efa.woff2"
    as="font"
    type="font/woff2"
    crossorigin
  >
  <link
    rel="preload"
    href="/assets/fonts/UntitledSans-Medium.4adc0df5.woff2"
    as="font"
    type="font/woff2"
    crossorigin
  >
  <link
    rel="preload"
    href="/assets/fonts/JetBrainsMono-Regular.5eea635b.woff2"
    as="font"
    type="font/woff2"
    crossorigin
  >
<link rel="stylesheet" href="/assets/app.6c0c2135.css" />
<script src="/assets/342.70de04a2.js" defer></script>
<script src="/assets/app.26949583.js" defer></script>
</head>

<body><div class="header-wrapper">
  <header class="header">
    <div class="header-container">

      <div class="primary-links"><a href="#sidenav-open" title="Open Docs Menu" aria-label="Open Docs Menu" class="hamburger for-mobile" data-turbo="false">
  <svg role="presentation" focusable="false" aria-label="Icon for open menu" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <line x1="4" y1="6" x2="20" y2="6" />
    <line x1="4" y1="12" x2="20" y2="12" />
    <line x1="4" y1="18" x2="20" y2="18" />
  </svg>
</a>

<div class="logo-wrapper">
  <a href="https://adonisjs.com" title="AdonisJS website" target="_blank" rel="noopener">
    <span class="for-mobile">
      <svg width="68" height="17" viewBox="0 0 68 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M54.6867 0C53.54 0 52.7119 0.812178 52.7119 1.94286C52.7119 3.07354 53.54 3.88571 54.6867 3.88571C55.8333 3.88571 56.6614 3.07354 56.6614 1.94286C56.6614 0.812178 55.8333 0 54.6867 0ZM18.5686 16.6895C15.511 16.6895 13.2974 14.4286 13.2974 10.8927C13.2974 7.29317 15.511 5.03232 18.5686 5.03232C19.9859 5.03232 21.037 5.51007 21.6581 6.44965V0.509602H24.8431V16.4347H21.6581V15.304C21.0529 16.2276 20.0019 16.6895 18.5686 16.6895ZM16.5461 10.8927C16.5461 8.91803 17.6131 7.6281 19.2375 7.6281C20.8778 7.6281 21.9288 8.90211 21.9288 10.8768C21.9288 12.8197 20.8778 14.0778 19.2375 14.0778C17.6131 14.0778 16.5461 12.8197 16.5461 10.8927ZM29.8436 10.8609C29.8436 8.90211 30.9105 7.64403 32.503 7.64403C34.1115 7.64403 35.1785 8.90211 35.1785 10.8609C35.1785 12.8197 34.1115 14.0778 32.503 14.0778C30.9105 14.0778 29.8436 12.8197 29.8436 10.8609ZM64.9424 13.393C64.9424 13.9822 64.4965 14.3326 63.3658 14.3326C62.0918 14.3326 61.2956 13.6637 61.2956 12.8515H58.1105C58.1902 15.0492 60.2763 16.6895 63.3021 16.6895C66.1686 16.6895 68 15.4155 68 13.1541C68 11.466 66.9171 10.2876 64.7672 9.85761L62.4581 9.39578C61.7574 9.25246 61.3433 8.90211 61.3433 8.44028C61.3433 7.7555 62.044 7.38923 62.9358 7.38923C64.2098 7.38923 64.7035 7.97845 64.7035 8.67916H67.7293C67.6497 6.6089 66.0253 5.03232 62.9995 5.03232C60.1808 5.03232 58.2698 6.44965 58.2698 8.59953C58.2698 10.5424 59.5279 11.4183 61.407 11.8164L63.7002 12.3101C64.4487 12.4693 64.9424 12.7878 64.9424 13.393ZM53.1101 5.28712H56.2951V16.4347H53.1101V5.28712ZM43.3639 5.28712V6.44965C44.1761 5.51007 45.259 5.03232 46.5967 5.03232C49.097 5.03232 50.7213 6.65667 50.7213 9.17283V16.4347H47.5363V9.84169C47.5363 8.48806 46.7719 7.67588 45.4501 7.67588C44.1283 7.67588 43.3639 8.48806 43.3639 9.84169V16.4347H40.1789V5.28712H43.3639ZM32.503 5.03232C29.111 5.03232 26.5948 7.48478 26.5948 10.8609C26.5948 14.237 29.111 16.6895 32.503 16.6895C35.911 16.6895 38.4272 14.237 38.4272 10.8609C38.4272 7.48478 35.911 5.03232 32.503 5.03232ZM5.94005 7.6281C4.31569 7.6281 3.24871 8.91803 3.24871 10.8927C3.24871 12.8197 4.31569 14.0778 5.94005 14.0778C7.58033 14.0778 8.63138 12.8197 8.63138 10.8768C8.63138 8.90211 7.58033 7.6281 5.94005 7.6281ZM0 10.8927C0 14.4286 2.21358 16.6895 5.25527 16.6895C6.70445 16.6895 7.73958 16.2276 8.36066 15.304V16.4347H11.5457V5.28712H8.36066V6.44965C7.72365 5.51007 6.6726 5.03232 5.25527 5.03232C2.21358 5.03232 0 7.29317 0 10.8927Z" fill="white"/>
      </svg>
    </span>

    <span class="for-desktop">
      <svg width="108" height="36" viewBox="0 0 108 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0 16.3331C0 29.506 3.16017 32.6662 16.3331 32.6662C29.506 32.6662 32.6662 29.506 32.6662 16.3331C32.6662 3.16017 29.506 0 16.3331 0C3.16017 0 0 3.16017 0 16.3331ZM6.58646 19.7261L11.7093 8.08338C12.5742 6.12075 14.2374 5.05627 16.3331 5.05627C18.4288 5.05627 20.092 6.12075 20.9569 8.08338L26.0797 19.7261C26.3126 20.2916 26.5122 21.0235 26.5122 21.6555C26.5122 24.5495 24.483 26.5787 21.589 26.5787C20.6032 26.5787 19.8203 26.3271 19.0278 26.0725C18.2158 25.8116 17.3937 25.5475 16.3331 25.5475C15.2847 25.5475 14.4426 25.814 13.6145 26.076C12.8136 26.3294 12.0258 26.5787 11.0772 26.5787C8.18318 26.5787 6.15402 24.5495 6.15402 21.6555C6.15402 21.0235 6.35361 20.2916 6.58646 19.7261ZM16.3331 10.1125L11.2768 21.5557C12.7737 20.8571 14.5035 20.5245 16.3331 20.5245C18.0961 20.5245 19.8924 20.8571 21.3228 21.5557L16.3331 10.1125Z" fill="white"></path>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M94.0883 8.03894C92.9542 8.03894 92.1352 8.84223 92.1352 9.96054C92.1352 11.0788 92.9542 11.8821 94.0883 11.8821C95.2223 11.8821 96.0414 11.0788 96.0414 9.96054C96.0414 8.84223 95.2223 8.03894 94.0883 8.03894ZM58.3654 24.5458C55.3413 24.5458 53.1519 22.3097 53.1519 18.8125C53.1519 15.2523 55.3413 13.0162 58.3654 13.0162C59.7673 13.0162 60.8068 13.4887 61.4211 14.418V8.54297H64.5713V24.2938H61.4211V23.1755C60.8226 24.089 59.783 24.5458 58.3654 24.5458ZM56.3651 18.8125C56.3651 16.8594 57.4204 15.5836 59.027 15.5836C60.6493 15.5836 61.6889 16.8436 61.6889 18.7967C61.6889 20.7183 60.6493 21.9627 59.027 21.9627C57.4204 21.9627 56.3651 20.7183 56.3651 18.8125ZM69.517 18.781C69.517 16.8436 70.5723 15.5993 72.1474 15.5993C73.7382 15.5993 74.7935 16.8436 74.7935 18.781C74.7935 20.7183 73.7382 21.9627 72.1474 21.9627C70.5723 21.9627 69.517 20.7183 69.517 18.781ZM104.232 21.2854C104.232 21.8681 103.791 22.2147 102.672 22.2147C101.412 22.2147 100.625 21.5531 100.625 20.7498H97.4747C97.5535 22.9235 99.6168 24.5458 102.609 24.5458C105.445 24.5458 107.256 23.2857 107.256 21.0491C107.256 19.3795 106.185 18.214 104.059 17.7887L101.775 17.3319C101.082 17.1902 100.672 16.8436 100.672 16.3869C100.672 15.7096 101.365 15.3473 102.247 15.3473C103.507 15.3473 103.996 15.9301 103.996 16.6231H106.988C106.909 14.5755 105.303 13.0162 102.31 13.0162C99.5223 13.0162 97.6322 14.418 97.6322 16.5444C97.6322 18.466 98.8765 19.3323 100.735 19.726L103.003 20.2143C103.744 20.3718 104.232 20.6868 104.232 21.2854ZM95.6791 24.2938H92.5289V13.2682H95.6791V24.2938ZM82.8895 13.2682V14.418C83.6927 13.4887 84.7638 13.0162 86.0869 13.0162C88.5597 13.0162 90.1663 14.6228 90.1663 17.1114V24.2938H87.0162V17.7729C87.0162 16.4341 86.2601 15.6308 84.9528 15.6308C83.6455 15.6308 82.8895 16.4341 82.8895 17.7729V24.2938H79.7393V13.2682H82.8895ZM72.1474 13.0162C68.7925 13.0162 66.3039 15.4418 66.3039 18.781C66.3039 22.1202 68.7925 24.5458 72.1474 24.5458C75.5181 24.5458 78.0067 22.1202 78.0067 18.781C78.0067 15.4418 75.5181 13.0162 72.1474 13.0162ZM45.8751 15.5836C44.2685 15.5836 43.2132 16.8594 43.2132 18.8125C43.2132 20.7183 44.2685 21.9627 45.8751 21.9627C47.4974 21.9627 48.5369 20.7183 48.5369 18.7967C48.5369 16.8436 47.4974 15.5836 45.8751 15.5836ZM40 18.8125C40 22.3097 42.1894 24.5458 45.1978 24.5458C46.6311 24.5458 47.6549 24.089 48.2692 23.1755V24.2938H51.4193V13.2682H48.2692V14.418C47.6391 13.4887 46.5996 13.0162 45.1978 13.0162C42.1894 13.0162 40 15.2523 40 18.8125Z" fill="white"></path>
      </svg>
    </span>
  </a>
</div>

      </div>

      <nav class="header-nav">
        <ul>


                <li class="active">
                  <a href="/guides/context">
                    Docs
                  </a>
                  <ul>
                  </ul>
                </li>

              <li
                class=""
                x-data="{ active: false }"
                :class="{ 'expand': active }"
              >
                <a href="#" @click.prevent="active = !active">
                  Reference guides
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-down" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <polyline points="6 9 12 15 18 9" />
                  </svg>
                </a>
                <ul class="dropdown">
                    <li>
                      <a href="/reference/database/connection">Database</a>
                    </li>
                    <li>
                      <a href="/reference/validator/schema/string">Validator</a>
                    </li>
                    <li>
                      <a href="/reference/views/globals/inspect">Views &amp; Templates</a>
                    </li>
                </ul>
              </li>
        </ul>
      </nav>

      <div class="search-wrapper">
        <button class="search-trigger" title="Open search popup" aria-label="Open search popup">
          <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" aria-hidden="true">
            <path d="M0 0h24v24H0z" fill="none"></path>
            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
          </svg>
          <span class="text"> Search... </span>
        </button>
      </div>
    </div>
  </header>
</div>

<div id="sidenav-open">
  <div class="sidebar" id="sidebar" data-maintain-scroll>
    <div class="sidebar-container">




                <nav>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/introduction"> Introduction </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Fundamentals </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/application"> Application </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/config"> Config </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/environment-variables"> Environment variables </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Http </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/context"> Context </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/routing"> Routing </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/controllers"> Controllers </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/request"> Request </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/response"> Response </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/forms-and-validations"> Forms &amp; Validation </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/file-uploads"> File uploads </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/middleware"> Middleware </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/cookies"> Cookies </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/session"> Session </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/static-assets"> Static assets </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/assets-manager"> Assets manager </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/exception-handling"> Exception Handling </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Views &amp; Templates </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/views/introduction"> Introduction </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/rendering"> Rendering </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/templating-syntax"> Templating syntax </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/data-flow"> Data flow </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/conditionals"> Conditionals </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/loops"> Loops </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/partials"> Partials </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/layouts"> Layouts </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/components"> Components </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/mutations"> Mutations </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/debugging"> Debugging </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/views/custom-tags"> Creating custom tags </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Validator </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/introduction"> Introduction </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/custom-messages"> Custom messages </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/error-reporters"> Error reporters </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/schema-caching"> Schema caching </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/validator/extending-validator"> Extending validator </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Security </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/security/web-security"> Web Security </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/security/encryption"> Encryption </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/security/hashing"> Hashing </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/security/signed-urls"> Signed URLs </a>
                      </li>
                  </ol>
                </nav>
                <nav>
                    <h3> Digging deeper </h3>
                  <ol>
                      <li
                        class=""
                      >
                        <a href="/guides/authorization"> Authorization </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/ace-commandline"> Ace </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/repl"> AdonisJS Repl </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/logger"> Logger </a>
                      </li>
                      <li
                        class="active"
                      >
                        <a href="/guides/mailer"> Mailer </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/redis"> Redis </a>
                      </li>
                      <li
                        class=""
                      >
                        <a href="/guides/health-check"> Health check </a>
                      </li>
                  </ol>
                </nav>

    </div>
  </div>

  <a href="#" data-turbo="false" id="sidenav-close" class="sidenav-backdrop" title="Close Docs Menu" aria-label="Close Docs Menu"></a>
</div>

<main class="doc" data-turbo="false">
  <div class="markdown">
    <h1>Mailer</h1><p>You can send emails from your application using the Mailer module of AdonisJS. It is built on top of <a
  href="https://nodemailer.com/about/"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>nodemailer</a>
 with a few additions like <strong>previewing emails</strong> and the ability to <strong>trap emails during tests</strong>.</p>
<p>Before you can start sending emails, make sure to install and configure the package using the following instructions.</p>
<div class="setup">
<div
  x-data="initializeCodegroups()"
  x-init="mounted"
  class="codegroup"
>
  <div class="codegroup-tabs">
    <div x-ref="highlighter" class="highlighter" style="width: 0; left: 20px;"></div>
      <a
        href=""
        x-ref=firstTab
        @click.prevent="changeTab(1, event.target)"
        :class="{ active: 1 === activeTab }">Install</a>
      <a
        href=""
        
        @click.prevent="changeTab(2, event.target)"
        :class="{ active: 2 === activeTab }">Configure</a>
      <a
        href=""
        
        @click.prevent="changeTab(3, event.target)"
        :class="{ active: 3 === activeTab }">Validate environment variables</a>
  </div>
  <div>
      <div x-show="activeTab === 1"><div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">npm i @adonisjs/mail</span></div></code></pre>
</div>
      </div>
      <div x-show="activeTab === 2"><div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">node ace configure @adonisjs/mail</span></div><div class="line"></div><div class="line"><span style="color: #676E95;"># CREATE: config/mail.ts</span></div><div class="line"><span style="color: #676E95;"># CREATE: contracts/mail.ts</span></div><div class="line"><span style="color: #676E95;"># UPDATE: .env,.env.example</span></div><div class="line"><span style="color: #676E95;"># UPDATE: tsconfig.json { types += &quot;@adonisjs/mail&quot; }</span></div><div class="line"><span style="color: #676E95;"># UPDATE: .adonisrc.json { commands += &quot;@adonisjs/mail/build/commands&quot; }</span></div><div class="line"><span style="color: #676E95;"># UPDATE: .adonisrc.json { providers += &quot;@adonisjs/mail&quot; }</span></div></code></pre>
</div>
      </div>
      <div x-show="activeTab === 3"><div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;"> * Depending upon the mail driver you are using, you must validate</span></div><div class="line"><span style="color: #676E95;"> * the environment variables required by it.</span></div><div class="line"><span style="color: #676E95;"> *</span></div><div class="line"><span style="color: #676E95;"> * Following is an example with Mailgun</span></div><div class="line"><span style="color: #676E95;"> */</span></div><div class="line"><span style="color: #89DDFF;">export</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">default</span><span style="color: #A6ACCD;"> Env</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">rules</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">MAILGUN_API_KEY</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> Env</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">schema</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">string</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">MAILGUN_DOMAIN</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> Env</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">schema</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">string</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>
      </div>
  </div>
</div>
</div>
<div class="features"><ul>
<li>Support for multiple drivers. <strong>SparkPost</strong>, <strong>SES</strong>, <strong>Mailgun</strong> and <strong>Smtp</strong></li>
<li>Ability to trap emails during tests</li>
<li>Use edge templates to define the email markup</li>
<li>Preview emails on a dummy SMTP server</li>
</ul><ul>
<li><a
  href="https://npm.im/@adonisjs/mail"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>View on npm</a>
</li>
<li><a
  href="https://github.com/adonisjs/mail"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>View on Github</a>
</li>
</ul></div>
<h2 id="config"><a
  href="#config"
  
  
><span class="icon icon-link"></span></a>
Config</h2>
<p>The configuration for the mail package is stored inside the <code>config/mail.ts</code> file. Inside this file, you can define multiple mailers using the same or different drivers.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #C792EA;">const</span><span style="color: #A6ACCD;"> mailConfig</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MailConfig</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">mailer</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mailgun</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">mailers</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #F07178;">mailgun</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">      </span><span style="color: #F07178;">driver</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mailgun</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">      </span><span style="color: #F07178;">baseUrl</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">https://api.mailgun.net/v3</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">      </span><span style="color: #F07178;">key</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> Env</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">MAILGUN_API_KEY</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">      </span><span style="color: #F07178;">domain</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> Env</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">MAILGUN_DOMAIN</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #89DDFF;">},</span></div><div class="line"></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #F07178;">smtp</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">      </span><span style="color: #F07178;">driver</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">smtp</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">      </span><span style="color: #F07178;">host</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> Env</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">SMTP_HOST</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">) </span><span style="color: #89DDFF;">as</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">string</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">      </span><span style="color: #F07178;">port</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> Env</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">SMTP_PORT</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">) </span><span style="color: #89DDFF;">as</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">string</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #89DDFF;">},</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">},</span></div><div class="line"><span style="color: #89DDFF;">}</span></div><div class="line"></div><div class="line"><span style="color: #89DDFF;">export</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">default</span><span style="color: #A6ACCD;"> mailConfig</span></div></code></pre>
</div>

<h4 id="mailer"><a
  href="#mailer"
  
  
><span class="icon icon-link"></span></a>
mailer</h4>
<p>The mailer property defines the default mailer to use for sending emails.</p>
<hr/>
<h4 id="mailers"><a
  href="#mailers"
  
  
><span class="icon icon-link"></span></a>
mailers</h4>
<p>The <code>mailers</code> object defines a list of mailers you want to use. Each mailer must specify the driver it wants to use.</p>
<hr/>
<h4 id="mailgun-options"><a
  href="#mailgun-options"
  
  
><span class="icon icon-link"></span></a>
Mailgun options</h4>
<p>The mailgun driver optionally accepts the following options.</p>









































<table><thead><tr><th>Config option</th><th>Mailgun variant</th></tr></thead><tbody><tr><td><code>oTag</code></td><td>o:tag</td></tr><tr><td><code>oDeliverytime</code></td><td>o:deliverytime</td></tr><tr><td><code>oTestMode</code></td><td>o:testmode</td></tr><tr><td><code>oTracking</code></td><td>o:tracking</td></tr><tr><td><code>oTrackingClick</code></td><td>o:tracking-clicks</td></tr><tr><td><code>oTrackingOpens</code></td><td>o:tracking-opens</td></tr><tr><td><code>oDkim</code></td><td>o:dkim</td></tr><tr><td><code>headers</code></td><td>h:&lt;header-name&gt;</td></tr></tbody></table>
<p>You can pass all of the options except <code>oDkim</code> during the <code>Mail.send</code> call as well.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">use</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mailgun</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">send</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">subject</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Welcome Onboard!</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">},</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">oTag</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> [</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">signup</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">]</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="sparkpost-options"><a
  href="#sparkpost-options"
  
  
><span class="icon icon-link"></span></a>
Sparkpost options</h4>
<p>The sparkpost driver optionally accepts the following options.</p>





































<table><thead><tr><th>Config option</th><th>Sparkpost variant</th></tr></thead><tbody><tr><td><code>startTime</code></td><td>start_time</td></tr><tr><td><code>openTracking</code></td><td>open_tracking</td></tr><tr><td><code>clickTracking</code></td><td>click_tracking</td></tr><tr><td><code>transactional</code></td><td>transactional</td></tr><tr><td><code>sandbox</code></td><td>sandbox</td></tr><tr><td><code>skipSuppression</code></td><td>skip_suppression</td></tr><tr><td><code>ipPool</code></td><td>ip_pool</td></tr></tbody></table>
<p>You can also define all of the configuration options at runtime during the <code>Mail.send</code> call.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">use</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">sparkpost</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">send</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">subject</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Welcome Onboard!</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">},</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">transaction</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FF9CAC;">true</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">openTracking</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FF9CAC;">false</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="smtp-auth-options"><a
  href="#smtp-auth-options"
  
  
><span class="icon icon-link"></span></a>
Smtp auth options</h4>
<p>You can define the authentication options for the SMTP connections as follows:</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">smtp</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #FFCB6B;">driver</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">smtp</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #FFCB6B;">auth</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #FFCB6B;">type</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">login</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #FFCB6B;">user</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">username</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #FFCB6B;">pass</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">password</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Using Oauth2</span></div><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">smtp</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #FFCB6B;">driver</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">smtp</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #FFCB6B;">auth</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #FFCB6B;">type</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">OAuth2</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #FFCB6B;">user</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">username</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #FFCB6B;">clientId</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">clientId</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #FFCB6B;">clientSecret</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">clientSecret</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #A6ACCD;">refreshToken</span><span style="color: #89DDFF;">?:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">refreshToken</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #A6ACCD;">accessToken</span><span style="color: #89DDFF;">?:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">accessToken</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #A6ACCD;">expires</span><span style="color: #89DDFF;">?:</span><span style="color: #F07178;"> </span><span style="color: #F78C6C;">3600</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #A6ACCD;">accessUrl</span><span style="color: #89DDFF;">?:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">accessUrl</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="adding-new-mailers"><a
  href="#adding-new-mailers"
  
  
><span class="icon icon-link"></span></a>
Adding new mailers</h3>
<p>You can also add new mailers after configuring the package. Use the <a
  href="https://github.com/adonisjs/mail/blob/develop/templates/config.txt"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>config stub</a>
 as a reference to copy the default options for all the drivers.</p>
<p>Also, you must define the mailers inside the <code>contracts/mail.ts</code> file before you can define its config or use it to send emails. The contracts file is a way to inform the Typescript static compiler about the existence of the mailer.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #C792EA;">declare</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">module</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">import</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">MailDrivers</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">from</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #C792EA;">interface</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">MailersList</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    smtp</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">MailDrivers</span><span style="color: #F07178;">[</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">smtp</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">]</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">    ses</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">MailDrivers</span><span style="color: #F07178;">[</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">ses</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">]</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">    mailgun</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">MailDrivers</span><span style="color: #F07178;">[</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mailgun</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">]</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">    sparkpost</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">MailDrivers</span><span style="color: #F07178;">[</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">sparkpost</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">]</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<p>The <code>MailersList</code> interface is a key-value pair of the mailer name and the driver it uses. The key can be anything. For example:</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #C792EA;">interface</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MailersList</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">transactional</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MailDrivers</span><span style="color: #A6ACCD;">[</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mailgun</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">]</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">newsletter</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MailDrivers</span><span style="color: #A6ACCD;">[</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">sparkpost</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">]</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h2 id="usage"><a
  href="#usage"
  
  
><span class="icon icon-link"></span></a>
Usage</h2>
<p>Once done with the setup, you can import the <code>Mail</code> module and send emails using the <code>Mail.send</code> method. It accepts a callback function to let you configure the outgoing message.</p>
<p>In the following example, the <code>htmlView</code> method accepts the path to an edge template and the data you want to pass to it.</p>
<div class="dimer-highlight">

<pre><code><div class="line highlight"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> Mail </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line dim"></div><div class="line dim"><span style="color: #C792EA;">class</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">UsersController</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">store</span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">await</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">send</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #F07178;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #F07178;">      </span><span style="color: #A6ACCD;">message</span></div><div class="line highlight"><span style="color: #F07178;">        </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">info@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">        </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">to</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">virk@adonisjs.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">        </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">subject</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Welcome Onboard!</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">        </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">htmlView</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">emails/welcome</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> name</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Virk</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line dim"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="defer-email-sending"><a
  href="#defer-email-sending"
  
  
><span class="icon icon-link"></span></a>
Defer email sending</h3>
<p>You can make use of the <code>Mail.sendLater</code> method to push the email to an in-memory queue. This ensures that the email is sent in the background and doesn&#x27;t block the ongoing HTTP request. For example:</p>
<div class="dimer-highlight">

<pre><code><div class="line dim"><span style="color: #C792EA;">class</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">UsersController</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">store</span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #89DDFF;">    </span><span style="color: #676E95;">// Pushed to in-memory queue</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">await</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendLater</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #F07178;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #F07178;">      </span><span style="color: #A6ACCD;">message</span></div><div class="line dim"><span style="color: #F07178;">        </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">info@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">        </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">to</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">virk@adonisjs.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">        </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">subject</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Welcome Onboard!</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">        </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">htmlView</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">emails/welcome</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> name</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Virk</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line dim"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h2 id="email-templates"><a
  href="#email-templates"
  
  
><span class="icon icon-link"></span></a>
Email templates</h2>
<p>You can make use of standard edge templates for defining the email content. The templates live inside the same <code>resources/views</code> directory. For better organization, you can move them inside a sub-directory called <code>emails</code>. For example:</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">node ace make:view emails/welcome</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">#   create    resources/views/emails/welcome.edge</span></div></code></pre>
</div>

<p>Open the newly created template file and paste the following contents inside it.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">&lt;</span><span style="color: #F07178;">h1</span><span style="color: #89DDFF;">&gt;</span><span style="color: #A6ACCD;"> Welcome </span><span style="color: #82AAFF;">{{</span><span style="color: #A6ACCD;"> user</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">fullName </span><span style="color: #82AAFF;">}}</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&lt;/</span><span style="color: #F07178;">h1</span><span style="color: #89DDFF;">&gt;</span></div><div class="line"><span style="color: #89DDFF;">&lt;</span><span style="color: #F07178;">p</span><span style="color: #89DDFF;">&gt;</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">&lt;</span><span style="color: #F07178;">a</span><span style="color: #89DDFF;"> </span><span style="color: #C792EA;">href</span><span style="color: #89DDFF;">=</span><span style="color: #89DDFF;">&quot;</span><span style="color: #82AAFF;">{{</span><span style="color: #C3E88D;"> url </span><span style="color: #82AAFF;">}}</span><span style="color: #89DDFF;">&quot;</span><span style="color: #89DDFF;">&gt;</span><span style="color: #A6ACCD;">Click here</span><span style="color: #89DDFF;">&lt;/</span><span style="color: #F07178;">a</span><span style="color: #89DDFF;">&gt;</span><span style="color: #A6ACCD;"> to verify your email address.</span></div><div class="line"><span style="color: #89DDFF;">&lt;/</span><span style="color: #F07178;">p</span><span style="color: #89DDFF;">&gt;</span></div></code></pre>
</div>

<p>Finally, you can reference the template as follows.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendLater</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">htmlView</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">emails/welcome</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    user</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> fullName</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Some Name</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">},</span></div><div class="line"><span style="color: #F07178;">    url</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">https://your-app.com/verification-url</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>You can also assign templates for the plain text and the apple watch content.</p>
<div class="dimer-highlight">
    <div class="codeblock-title">
      Plain text
    </div>

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">textView</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">emails/welcome.plain</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<div class="dimer-highlight">
    <div class="codeblock-title">
      Apple watch
    </div>

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">watchView</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">emails/welcome.watch</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h3 id="using-mjml-to-create-your-template"><a
  href="#using-mjml-to-create-your-template"
  
  
><span class="icon icon-link"></span></a>
Using MJML to create your template</h3>
<p>Here&#x27;s a screencast showing how to use <a
  href="https://mjml.io/"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>MJML</a>
 as your markup language for emails.</p>
<div class="embed embed-youtube"><iframe src="https://www.youtube.com/embed/zehb-qUzRCM" width=100% height=400 frameborder="none" allow="autoplay; encrypted-media" allowfullscreen="true"></iframe></div>
<h2 id="attachments"><a
  href="#attachments"
  
  
><span class="icon icon-link"></span></a>
Attachments</h2>
<p>You can send attachments using the <code>message.attach</code> method. It takes an absolute path to the file to attach.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> Mail </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> Application </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Core/Application</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"></div><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendLater</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">attach</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">Application</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">tmpPath</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">receipt.png</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">))</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>The file content type, encoding, and headers are derived from the filename. However, you can overwrite the defaults by explicitly defining them.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">attach</span><span style="color: #A6ACCD;">(</span></div><div class="line"><span style="color: #A6ACCD;">  Application</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">tmpPath</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">receipt.png</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #F07178;">filename</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x60;${</span><span style="color: #A6ACCD;">transaction</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">id</span><span style="color: #89DDFF;">}</span><span style="color: #C3E88D;">.png</span><span style="color: #89DDFF;">&#x60;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #F07178;">contentDisposition</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">attachment</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #F07178;">contentType</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">image/png</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h3 id="streams-and-buffers-as-attachments"><a
  href="#streams-and-buffers-as-attachments"
  
  
><span class="icon icon-link"></span></a>
Streams and buffers as attachments</h3>
<p>You can also send a Buffer or a stream directly as an attachment using the <code>message.attachData</code> method.</p>
<div class="alert alert-note"><p>Make sure to define the filename explicitly when passing a buffer or a stream.</p></div>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">attachData</span><span style="color: #A6ACCD;">(</span></div><div class="line"><span style="color: #A6ACCD;">  fs</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">createReadStream</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">file.txt</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #F07178;">filename</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">file.txt</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">attachData</span><span style="color: #A6ACCD;">(</span></div><div class="line"><span style="color: #A6ACCD;">  Buffer</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">hello world</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #F07178;">filename</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">file.txt</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="embedding-images"><a
  href="#embedding-images"
  
  
><span class="icon icon-link"></span></a>
Embedding images</h2>
<p>There are <a
  href="https://blog.mailtrap.io/embedding-images-in-html-email-have-the-rules-changed"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>multiple ways</a>
 to render images inside the email body. One of them is sending the image as an attachment and then adding it to the HTML using its Content-Id (CID).</p>
<p>You can use the <code>message.embed</code> method and pass it the absolute path of the file, along with a unique id as the second argument.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendLater</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">embed</span><span style="color: #F07178;">(</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #A6ACCD;">Application</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">publicPath</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">receipt.png</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">a-unique-id-for-the-attachment</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">  )</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>Inside the edge template, you can use the earlier defined unique id as the <code>img</code> src.</p>
<div class="dimer-highlight">
    <div class="codeblock-title">
      Email template
    </div>

<pre><code><div class="line"><span style="color: #89DDFF;">&lt;</span><span style="color: #F07178;">img</span><span style="color: #89DDFF;"> </span><span style="color: #C792EA;">src</span><span style="color: #89DDFF;">=</span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">cid:a-unique-id-for-the-attachment</span><span style="color: #89DDFF;">&quot;</span><span style="color: #89DDFF;"> /&gt;</span></div></code></pre>
</div>

<p>Similar to the <a
  href="#streams-and-buffers-as-attachments"
  
  
>message.attachData</a>
, you can also embed a Buffer or a stream directly using the <code>embedData</code> method.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">embedData</span><span style="color: #A6ACCD;">(</span></div><div class="line"><span style="color: #A6ACCD;">  fs</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">createReadStream</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">file.txt</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">a-unique-id-for-the-attachment</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="messages-api"><a
  href="#messages-api"
  
  
><span class="icon icon-link"></span></a>
Messages API</h2>
<p>Following is the list of available methods on the <code>message</code> object.</p>
<h4 id="from"><a
  href="#from"
  
  
><span class="icon icon-link"></span></a>
from</h4>
<p>Define the sender for the email.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">admin@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Define name alongside the email</span></div><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">admin@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Admin</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="to"><a
  href="#to"
  
  
><span class="icon icon-link"></span></a>
to</h4>
<p>Define the recipient of the email. Calling this method multiple times will push a new recipient to the list. Similarly, you can call the <code>cc</code> and the <code>bcc</code> methods to add respect recipients.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">to</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">foo@bar.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Define name alongside the email</span></div><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">to</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">foo@bar.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Mr foo</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="subject"><a
  href="#subject"
  
  
><span class="icon icon-link"></span></a>
subject</h4>
<p>Define the subject for the email.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">subject</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Verify email address</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="replyto"><a
  href="#replyto"
  
  
><span class="icon icon-link"></span></a>
replyTo</h4>
<p>An email address that will appear on the <code>Reply-To: field.</code></p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">replyTo</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">support@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Define name alongside the email</span></div><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">replyTo</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">support@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Support team</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="messageid"><a
  href="#messageid"
  
  
><span class="icon icon-link"></span></a>
messageId</h4>
<p>Optional <code>Message-Id</code> value. We will generate a random value if not set.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">messageId</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Custom-message-id</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="inreplyto"><a
  href="#inreplyto"
  
  
><span class="icon icon-link"></span></a>
inReplyTo</h4>
<p>The Message-ID this message is replying to</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">replyTo</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">some-existing-message-id</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="references"><a
  href="#references"
  
  
><span class="icon icon-link"></span></a>
references</h4>
<p>An array of Message-IDs.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">references</span><span style="color: #A6ACCD;">([</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">id-1</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">id-2</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">])</span></div></code></pre>
</div>

<hr/>
<h4 id="envelope"><a
  href="#envelope"
  
  
><span class="icon icon-link"></span></a>
envelope</h4>
<p>Optionally define the SMTP envelope, if auto generated envelope is not suitable (see <a
  href="https://nodemailer.com/smtp/envelope/"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>SMTP envelope</a>
 for details)</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">envelope</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">from</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">to</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">cc</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">bcc</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="priority"><a
  href="#priority"
  
  
><span class="icon icon-link"></span></a>
priority</h4>
<p>Sets message importance headers. Value must be either <strong>high</strong>, <strong>normal</strong> (default) or <strong>low</strong>.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">priority</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">high</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="encoding"><a
  href="#encoding"
  
  
><span class="icon icon-link"></span></a>
encoding</h4>
<p>Identifies encoding for text/html strings (defaults to <code>utf-8</code>, other values are <code>hex</code> and <code>base64</code>).</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">encoding</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">utf-8</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="htmlview"><a
  href="#htmlview"
  
  
><span class="icon icon-link"></span></a>
htmlView</h4>
<p>Define the HTML body of the email by rendering an edge template. Optionally, it accepts the data to pass to the template.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">htmlView</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">emails/verify-email</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">user</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> user </span><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>You can use the <code>textView</code> method to define the email&#x27;s plain-text body and the <code>watchView</code> method to specify the apple watch body.</p>
<hr/>
<h4 id="html"><a
  href="#html"
  
  
><span class="icon icon-link"></span></a>
html</h4>
<p>Define the email HTML as a string directly. You must use either <code>html</code> or the <code>htmlView</code> method.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">html</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x60;</span><span style="color: #C3E88D;">&lt;p&gt; Welcome &lt;/p&gt;</span><span style="color: #89DDFF;">&#x60;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>Make use of the <code>text</code> and the <code>watch</code> methods to define the email body from a raw string.</p>
<hr/>
<h4 id="header"><a
  href="#header"
  
  
><span class="icon icon-link"></span></a>
header</h4>
<p>Define an email header.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">header</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">X-Key-Name</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">X-Value</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<hr/>
<h4 id="preparedheader"><a
  href="#preparedheader"
  
  
><span class="icon icon-link"></span></a>
preparedHeader</h4>
<p>Nodemailer internally encodes and folds the headers to meet the requirement of having plain-ASCII messages with lines no longer than 78 bytes.</p>
<p>Sometimes it is preferable not to modify header values and pass these as provided. This can be achieved using the <code>preparedHeader</code> method.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">preparedHeader</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">X-Key-Name</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">X-Value</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="switching-mailers-at-runtime"><a
  href="#switching-mailers-at-runtime"
  
  
><span class="icon icon-link"></span></a>
Switching mailers at runtime</h2>
<p>You can use the <code>Mail.use()</code> method to switch between the mailers. The <code>use</code> method accepts the mailer name defined inside the <code>config/mail.ts</code> file under the <code>mailers</code> object.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">use</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mailgun</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendLater</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div><div class="line"></div><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">use</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">smtp</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendLater</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="mailer-classes"><a
  href="#mailer-classes"
  
  
><span class="icon icon-link"></span></a>
Mailer classes</h2>
<p>Mailer classes allow you to extract the inline mail configuration to its dedicated class. The mailers are stored inside the <code>app/Mailers</code> directory, and you can create a new mailer by running the following ace command.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">node ace make:mailer VerifyEmail</span></div><div class="line"></div><div class="line"><span style="color: #676E95;"># CREATE: app/Emails/VerifyEmail.ts</span></div></code></pre>
</div>

<p>Every mailer class must extend the <a
  href="https://github.com/adonisjs/mail/blob/develop/src/BaseMailer/index.ts"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>BaseMailer</a>
 to inherit the capabilities for sending an email. For the most part, you will be working inside the <code>prepare</code> method to configure the mail message.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">BaseMailer</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">MessageContract</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"></div><div class="line"><span style="color: #89DDFF;">export</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">default</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">class</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">VerifyEmail</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">extends</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">BaseMailer</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">prepare</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MessageContract</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #A6ACCD;">message</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">subject</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">The email subject</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">admin@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">to</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">user@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<p>Now, you can replace the inline <code>Mail.send</code> method call with the Mailer class.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> VerifyEmail </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">App/Mailers/VerifyEmail</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Instantiate the class and send email</span></div><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">VerifyEmail</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendLater</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<h3 id="passing-data-to-the-mailer"><a
  href="#passing-data-to-the-mailer"
  
  
><span class="icon icon-link"></span></a>
Passing data to the mailer</h3>
<p>Mailer can accept data using the constructor arguments. For example:</p>
<div class="dimer-highlight">

<pre><code><div class="line dim"><span style="color: #89DDFF;">export</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">default</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">class</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">VerifyEmail</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">extends</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">BaseMailer</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">constructor</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">(</span><span style="color: #C792EA;">private</span><span style="color: #A6ACCD;"> user</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">User</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{}</span></div><div class="line dim"></div><div class="line dim"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">prepare</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MessageContract</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #F07178;">    </span><span style="color: #A6ACCD;">message</span></div><div class="line dim"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">subject</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">The email subject</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">admin@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">to</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">this.</span><span style="color: #A6ACCD;">user</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">email</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line dim"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<p>Here&#x27;s how you can pass the <code>user</code> at the time of instantiating the class.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #C792EA;">const</span><span style="color: #A6ACCD;"> user </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> User</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">find</span><span style="color: #A6ACCD;">(</span><span style="color: #F78C6C;">1</span><span style="color: #A6ACCD;">)</span></div><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">VerifyEmail</span><span style="color: #A6ACCD;">(user)</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendLater</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<h3 id="using-a-different-mailer"><a
  href="#using-a-different-mailer"
  
  
><span class="icon icon-link"></span></a>
Using a different mailer</h3>
<p>The mailer classes use the default mailer configured inside the <code>config/mail.ts</code> file. However, you can use a different one by defining the following property on the class instance.</p>
<div class="dimer-highlight">

<pre><code><div class="line highlight"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">BaseMailer</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">MessageContract</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line dim"></div><div class="line dim"><span style="color: #89DDFF;">export</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">default</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">class</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">VerifyEmail</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">extends</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">BaseMailer</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">mailer</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #F07178;">use</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mailgun</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span></div><div class="line dim"></div><div class="line dim"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">prepare</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MessageContract</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #F07178;">    </span><span style="color: #A6ACCD;">message</span></div><div class="line dim"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">subject</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">The email subject</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">admin@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">to</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">user@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line dim"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="customizing-mailers-directory"><a
  href="#customizing-mailers-directory"
  
  
><span class="icon icon-link"></span></a>
Customizing mailers directory</h3>
<p>You can change the namespace for storing the mailers by defining the <code>namespaces.mailers</code> property inside the <code>.adonisrc.json</code> file. After the following change, the <code>make:mailer</code> ace command will create new files inside the configured directory.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">namespaces</span><span style="color: #89DDFF;">&quot;</span><span style="color: #A6ACCD;">: </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C792EA;">mailers</span><span style="color: #89DDFF;">&quot;</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">App/Emails</span><span style="color: #89DDFF;">&quot;</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="mailer-classes-methods"><a
  href="#mailer-classes-methods"
  
  
><span class="icon icon-link"></span></a>
Mailer classes methods</h3>
<p>The BaseMailer class exposes the following methods to send or preview the email.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #676E95;">// Send email</span></div><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">VerifyEmail</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">send</span><span style="color: #A6ACCD;">()</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Send email by pushing it to in-memory queue</span></div><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">VerifyEmail</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendLater</span><span style="color: #A6ACCD;">()</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">// Preview email using fake SMTP server</span></div><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">new</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">VerifyEmail</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">preview</span><span style="color: #A6ACCD;">()</span></div></code></pre>
</div>

<h2 id="preview-emails"><a
  href="#preview-emails"
  
  
><span class="icon icon-link"></span></a>
Preview emails</h2>
<p>You can preview your emails by sending them to a <a
  href="https://ethereal.email/"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>fake SMTP server</a>
. This allows you to check if your email has any broken links or attachments before sending it to the actual users.</p>
<p>All you need to do is, replace the <code>sendLater</code> method with the <code>preview</code> method.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">await</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">preview</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">message</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">from</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">info@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">to</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">virk@adonisjs.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">subject</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Welcome Onboard!</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">htmlView</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">emails/welcome</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> name</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Virk</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>When using mailer classes, you can call the <code>preview</code> method directly on the class instance. Following is a demo of previewing emails via the ace REPL.</p>
<div class="embed embed-video"><video controls="undefined"><source src="https://res.cloudinary.com/adonis-js/video/upload/v1618142771/v5/mailer-preview-repl.mp4" type="video/mp4"/></video></div>
<h2 id="email-traps"><a
  href="#email-traps"
  
  
><span class="icon icon-link"></span></a>
Email traps</h2>
<p>AdonisJS allows you to trap the outgoing emails instead of sending them to the actual recipient. The traps are usually helpful when writing tests.</p>
<p>All you need to do is call the <code>Mail.trap</code> method and pass it the callback to receive the outgoing message.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">trap</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">assert</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">deepEqual</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">to</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> [</span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    address</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">virk@adonisjs.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">])</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">assert</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">deepEqual</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">from</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    address</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">admin@example.com</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line"></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">assert</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">equal</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">subject</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Welcome to my app</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>Once done with the test, you must restore the trap using the <code>Mail.restore</code> method. A better option will be to place this method inside the <code>afterEach</code> lifecycle hook of your testing framework.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #82AAFF;">afterEach</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #89DDFF;">  </span><span style="color: #676E95;">// Restore the trap. After this emails will be sent out</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">restore</span><span style="color: #F07178;">()</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<h2 id="events"><a
  href="#events"
  
  
><span class="icon icon-link"></span></a>
Events</h2>
<p>The mail module emits the <code>mail:sent</code> event that you can listen to observe the outgoing emails. You can place the code for the event listener inside a <a
  href=""
  
  
>preload</a>
 file.</p>
<div class="dimer-highlight">
    <div class="codeblock-title">
      start/events.ts
    </div>

<pre><code><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> Event </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Core/Event</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"></div><div class="line"><span style="color: #A6ACCD;">Event</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">on</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mail:sent</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">({</span><span style="color: #A6ACCD;"> message</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> views</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> mailer</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> response </span><span style="color: #89DDFF;">})</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">views</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">mailer</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #A6ACCD;">console</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">log</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">response</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>

<p>You can use the <code>Mail.prettyPrint</code> method to print the outgoing email on the terminal.</p>
<div class="dimer-highlight">
    <div class="codeblock-title">
      start/events.ts
    </div>

<pre><code><div class="line"></div><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> Event </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Core/Event</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> Mail </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"></div><div class="line"><span style="color: #A6ACCD;">Event</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">on</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mail:sent</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> Mail</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">prettyPrint)</span></div></code></pre>
</div>

<p><figure>
  <img
    data-src="https://res.cloudinary.com/adonis-js/image/upload/q_auto,f_auto/v1618150428/v5/adonis-mail-event-pretty-print.png"
    alt=""
    class="lazyload"
    
  >
</figure>
</p>
<h2 id="creating-a-custom-mail-driver"><a
  href="#creating-a-custom-mail-driver"
  
  
><span class="icon icon-link"></span></a>
Creating a custom mail driver</h2>
<p>The mail package exposes the API to add your custom drivers. Every driver must adhere to the <a
  href="https://github.com/adonisjs/mail/blob/develop/adonis-typings/mail.ts#L192"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>MailDriverContract</a>
.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #C792EA;">interface</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MailDriverContract</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">send</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MessageNode</span><span style="color: #89DDFF;">,</span><span style="color: #A6ACCD;"> config</span><span style="color: #89DDFF;">?:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">any</span><span style="color: #89DDFF;">):</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Promise</span><span style="color: #89DDFF;">&lt;</span><span style="color: #FFCB6B;">any</span><span style="color: #89DDFF;">&gt;</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">close</span><span style="color: #89DDFF;">():</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">void</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">|</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Promise</span><span style="color: #89DDFF;">&lt;</span><span style="color: #FFCB6B;">void</span><span style="color: #89DDFF;">&gt;</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h4 id="send"><a
  href="#send"
  
  
><span class="icon icon-link"></span></a>
send</h4>
<p>The <code>send</code> method is responsible for sending the email. It receives the message object and optional runtime config (if your driver accepts it).</p>
<hr/>
<h4 id="close"><a
  href="#close"
  
  
><span class="icon icon-link"></span></a>
close</h4>
<p>The close method should clean up any resources it has acquired. For example, The official <a
  href="https://github.com/adonisjs/mail/blob/develop/src/Drivers/Ses.ts#L54-L57"
  target=&quot;_blank&quot;
  rel=&quot;noopener&quot;
>SES driver</a>
 closes the underlying nodemailer transport</p>
<hr/>
<h3 id="extending-from-outside-in"><a
  href="#extending-from-outside-in"
  
  
><span class="icon icon-link"></span></a>
Extending from outside in</h3>
<p>Anytime you are extending the core of the framework. It is better to assume that you do not have access to the application code and its dependencies. In other words, write your extensions as if you are writing a third-party package and use dependency injection to rely on other dependencies.</p>
<p>For demonstration purposes, let&#x27;s create a mail driver that wraps the existing nodemailer postmark transport.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">mkdir providers/PostMarkDriver</span></div><div class="line"><span style="color: #A6ACCD;">touch providers/PostMarkDriver/index.ts</span></div></code></pre>
</div>

<p>The directory structure will look as follows.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #A6ACCD;">providers</span></div><div class="line"><span style="color: #A6ACCD;"> PostMarkDriver</span></div><div class="line"><span style="color: #A6ACCD;">     index.ts</span></div></code></pre>
</div>

<p>Open the <code>PostMarkDriver/index.ts</code> file and paste the following contents inside it.</p>
<div class="alert alert-note"><p>Make sure to install the <code>nodemailer</code> and the <code>nodemailer-postmark-transport</code> dependencies as well.</p></div>
<div class="dimer-highlight">
    <div class="codeblock-title">
      providers/PostMarkDriver/index.ts
    </div>

<pre><code><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> nodemailer </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">nodemailer</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> postMarkTransport </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">nodemailer-postmark-transport</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">MailDriverContract</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">MessageNode</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"></div><div class="line"><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;"> * Config accepted by the driver</span></div><div class="line"><span style="color: #676E95;"> */</span></div><div class="line"><span style="color: #89DDFF;">export</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">type</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">PostMarkConfig</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">driver</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">postmark</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #F07178;">auth</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">    </span><span style="color: #F07178;">apiKey</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">string</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div><div class="line"></div><div class="line"><span style="color: #89DDFF;">export</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">class</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">PostMarkDriver</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">implements</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MailDriverContract</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">private</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">transporter</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">any</span></div><div class="line"></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">constructor</span><span style="color: #89DDFF;">(</span><span style="color: #C792EA;">private</span><span style="color: #A6ACCD;"> config</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">PostMarkConfig</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">     * Instantiate the nodemailer transport</span></div><div class="line"><span style="color: #676E95;">     */</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">this.</span><span style="color: #A6ACCD;">transporter</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">nodemailer</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">createTransport</span><span style="color: #F07178;">(</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #82AAFF;">postMarkTransport</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">this.</span><span style="color: #A6ACCD;">config</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">    )</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * Send email using the underlying transport</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">send</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">MessageNode</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">this.</span><span style="color: #A6ACCD;">transporter</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">sendMail</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #F07178;">)</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #676E95;">/**</span></div><div class="line"><span style="color: #676E95;">   * Cleanup resources</span></div><div class="line"><span style="color: #676E95;">   */</span></div><div class="line"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">close</span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">this.</span><span style="color: #A6ACCD;">transporter</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">close</span><span style="color: #F07178;">()</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">this.</span><span style="color: #A6ACCD;">transporter</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">null</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<p>Next, you must register the driver with the <code>Mail</code> module of AdonisJS. You must do it inside the <code>boot</code> method of a service provider. Open the pre-existing <code>providers/AppProvider.ts</code> file and paste the following code inside it.</p>
<div class="dimer-highlight">

<pre><code><div class="line dim"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">ApplicationContract</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Core/Application</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line dim"></div><div class="line dim"><span style="color: #89DDFF;">export</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">default</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">class</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">AppProvider</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">constructor</span><span style="color: #89DDFF;">(</span><span style="color: #C792EA;">protected</span><span style="color: #A6ACCD;"> app</span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">ApplicationContract</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{}</span></div><div class="line dim"></div><div class="line dim"><span style="color: #A6ACCD;">  </span><span style="color: #C792EA;">public</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">async</span><span style="color: #A6ACCD;"> </span><span style="color: #F07178;">boot</span><span style="color: #89DDFF;">()</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #C792EA;">const</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">PostMarkDriver</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">await</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">import</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">./PostMarkDriver</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #C792EA;">const</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">Mail</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">this.</span><span style="color: #A6ACCD;">app</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">container</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">use</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">)</span></div><div class="line highlight"></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #A6ACCD;">Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">extend</span><span style="color: #F07178;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">postmark</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">_mail</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">_mapping</span><span style="color: #89DDFF;">,</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">config</span><span style="color: #89DDFF;">)</span><span style="color: #F07178;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">return</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">new</span><span style="color: #F07178;"> </span><span style="color: #82AAFF;">PostMarkDriver</span><span style="color: #F07178;">(</span><span style="color: #A6ACCD;">config</span><span style="color: #F07178;">)</span></div><div class="line highlight"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span><span style="color: #F07178;">)</span></div><div class="line dim"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line dim"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="driver-lifecycle"><a
  href="#driver-lifecycle"
  
  
><span class="icon icon-link"></span></a>
Driver lifecycle</h3>
<p>The mail module internally creates a single instance of the driver and uses it throughout the application&#x27;s lifecycle unless someone decides to close it manually.</p>
<h3 id="informing-typescript-about-the-new-driver"><a
  href="#informing-typescript-about-the-new-driver"
  
  
><span class="icon icon-link"></span></a>
Informing typescript about the new driver</h3>
<p>The next step is to inform typescript about the postmark driver and the config it accepts. Open the pre-existing <code>contracts/mail.ts</code> file and add the following code inside it.</p>
<div class="dimer-highlight">

<pre><code><div class="line highlight-insert"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span><span style="color: #F07178;"> </span><span style="color: #A6ACCD;">PostMarkConfig</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">../providers/PostMarkDriver</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line dim"></div><div class="line dim"><span style="color: #C792EA;">declare</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">module</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Addons/Mail</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #F07178;">  </span><span style="color: #C792EA;">interface</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">MailersList</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line dim"><span style="color: #F07178;">    mailgun</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">MailDrivers</span><span style="color: #F07178;">[</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">mailgun</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #F07178;">]</span><span style="color: #89DDFF;">,</span></div><div class="line highlight-insert"><span style="color: #F07178;">    postmark</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line highlight-insert"><span style="color: #F07178;">      config</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">PostMarkConfig</span><span style="color: #89DDFF;">,</span></div><div class="line highlight-insert"><span style="color: #F07178;">      implementation</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #FFCB6B;">MailDriverContract</span></div><div class="line highlight-insert"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span></div><div class="line dim"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line dim"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<h3 id="using-the-driver"><a
  href="#using-the-driver"
  
  
><span class="icon icon-link"></span></a>
Using the driver</h3>
<p>Alright, we are now ready to use the postmark driver. Let&#x27;s start by defining the config for a new mailer inside the <code>config/mail.ts</code> file.</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #FFCB6B;">mailers</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #FFCB6B;">postmark</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #FFCB6B;">driver</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">postmark</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #FFCB6B;">auth</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #F07178;">        </span><span style="color: #FFCB6B;">apiKey</span><span style="color: #89DDFF;">:</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">your-api-key</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #89DDFF;">,</span></div><div class="line"><span style="color: #F07178;">      </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #F07178;">    </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #F07178;">  </span><span style="color: #89DDFF;">}</span></div><div class="line"><span style="color: #89DDFF;">}</span></div></code></pre>
</div>

<p>And use it as follows:</p>
<div class="dimer-highlight">

<pre><code><div class="line"><span style="color: #89DDFF;">import</span><span style="color: #A6ACCD;"> Mail </span><span style="color: #89DDFF;">from</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">@ioc:Adonis/Core/Mail</span><span style="color: #89DDFF;">&#x27;</span></div><div class="line"></div><div class="line"><span style="color: #A6ACCD;">Mail</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">use</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #C3E88D;">postmark</span><span style="color: #89DDFF;">&#x27;</span><span style="color: #A6ACCD;">)</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">send</span><span style="color: #A6ACCD;">(</span><span style="color: #89DDFF;">(</span><span style="color: #A6ACCD;">message</span><span style="color: #89DDFF;">)</span><span style="color: #A6ACCD;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class="line"><span style="color: #89DDFF;">}</span><span style="color: #A6ACCD;">)</span></div></code></pre>
</div>
  </div>
</main>

<aside class="toc">
    <div class="toc-container" data-turbo="false">
      <h3> On this page </h3>
      <nav>
        <ul>
<li>
<p><a
  href="#config"
  
  
>Config</a>
</p>
<ul>
<li><a
  href="#adding-new-mailers"
  
  
>Adding new mailers</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#usage"
  
  
>Usage</a>
</p>
<ul>
<li><a
  href="#defer-email-sending"
  
  
>Defer email sending</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#email-templates"
  
  
>Email templates</a>
</p>
<ul>
<li><a
  href="#using-mjml-to-create-your-template"
  
  
>Using MJML to create your template</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#attachments"
  
  
>Attachments</a>
</p>
<ul>
<li><a
  href="#streams-and-buffers-as-attachments"
  
  
>Streams and buffers as attachments</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#embedding-images"
  
  
>Embedding images</a>
</p>
</li>
<li>
<p><a
  href="#messages-api"
  
  
>Messages API</a>
</p>
</li>
<li>
<p><a
  href="#switching-mailers-at-runtime"
  
  
>Switching mailers at runtime</a>
</p>
</li>
<li>
<p><a
  href="#mailer-classes"
  
  
>Mailer classes</a>
</p>
<ul>
<li><a
  href="#passing-data-to-the-mailer"
  
  
>Passing data to the mailer</a>
</li>
<li><a
  href="#using-a-different-mailer"
  
  
>Using a different mailer</a>
</li>
<li><a
  href="#customizing-mailers-directory"
  
  
>Customizing mailers directory</a>
</li>
<li><a
  href="#mailer-classes-methods"
  
  
>Mailer classes methods</a>
</li>
</ul>
</li>
<li>
<p><a
  href="#preview-emails"
  
  
>Preview emails</a>
</p>
</li>
<li>
<p><a
  href="#email-traps"
  
  
>Email traps</a>
</p>
</li>
<li>
<p><a
  href="#events"
  
  
>Events</a>
</p>
</li>
<li>
<p><a
  href="#creating-a-custom-mail-driver"
  
  
>Creating a custom mail driver</a>
</p>
<ul>
<li><a
  href="#extending-from-outside-in"
  
  
>Extending from outside in</a>
</li>
<li><a
  href="#driver-lifecycle"
  
  
>Driver lifecycle</a>
</li>
<li><a
  href="#informing-typescript-about-the-new-driver"
  
  
>Informing typescript about the new driver</a>
</li>
<li><a
  href="#using-the-driver"
  
  
>Using the driver</a>
</li>
</ul>
</li>
        </ul>
      </nav>
    </div>
</aside>

</body>
</html>